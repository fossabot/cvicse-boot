(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0db300"],{"6f93":function(e,t,n){"use strict";n.r(t);var s=n("be94"),i=(n("4ca3"),n("450d"),n("443e")),r=n.n(i),l=n("2ef0"),c=n("2f62"),a=n("b55f"),o=n("73eb"),h=(n("8bd8"),n("4cb2")),d={name:"header-menu-sub",components:{MenuItem:n.n(h).a},props:{menu:{type:Object,required:!1,default:()=>{}}}},u=n("2877"),m=Object(u.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("MenuItem",{attrs:{index:e.menu.path}},[e.menu.icon?n("i",{class:"fa fa-"+e.menu.icon}):e._e(),void 0===e.menu.icon&!e.menu.iconSvg?n("i",{staticClass:"fa fa-file-o"}):e._e(),e.menu.iconSvg?n("d2-icon-svg",{attrs:{name:e.menu.iconSvg}}):e._e(),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.menu.title||"未命名菜单"))])],1)},[],!1,null,null,null);m.options.__file="index.vue";var f=m.exports;const v=(e,t)=>e.path===t||!!e.children&&e.children.some(e=>v(e,t));var S={name:"d2-layout-header-aside-menu-header",mixins:[a.a],components:{Menu:r.a,MenuItem:o.a,HeaderMenuSub:f},computed:Object(s.a)({},Object(c.e)("d2admin/menu",["header"])),data:()=>({active:"",isScroll:!1,scrollWidth:0,contentWidth:0,currentTranslateX:0,throttledCheckScroll:null}),watch:{$route:{handler(e){let t=e.fullPath,n=this.header.find(e=>v(e,t));n||(n=this.header[0]),this.active=n.path;const s=n.children;this.$store.commit("d2admin/menu/asideSet",s,{root:!0})},immediate:!0}},methods:{handleHeaderMenuSelect(e,t){if(/^header-menu-\d+$/.test(e)){const t=this.header.find(t=>t.path===e);if(t){const e=t.children;this.$store.commit("d2admin/menu/asideSet",e,{root:!0})}}else this.handleMenuSelect(e,t)},scroll(e){"left"===e?this.currentTranslateX=0:2*this.contentWidth-this.currentTranslateX<=this.scrollWidth?this.currentTranslateX-=this.contentWidth:this.currentTranslateX=this.contentWidth-this.scrollWidth},checkScroll(){let e=this.$refs.content.clientWidth,t=this.$refs.scroll.clientWidth;this.isScroll&&(this.contentWidth-this.scrollWidth===this.currentTranslateX&&(this.currentTranslateX=e-t,this.currentTranslateX>0&&(this.currentTranslateX=0)),this.contentWidth=e,this.scrollWidth=t,e>t&&(this.isScroll=!1)),!this.isScroll&&e<t&&(this.isScroll=!0,this.$nextTick(()=>{e=this.$refs.content.clientWidth,t=this.$refs.scroll.clientWidth,this.contentWidth=e,this.scrollWidth=t,this.currentTranslateX=0}))}},mounted(){this.checkScroll(),this.throttledCheckScroll=Object(l.throttle)(this.checkScroll,300),window.addEventListener("resize",this.throttledCheckScroll)},beforeDestroy(){window.removeEventListener("resize",this.throttledCheckScroll)}},_=Object(u.a)(S,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"page",staticClass:"d2-theme-header-menu",class:{"is-scrollable":e.isScroll},attrs:{flex:"cross:center"}},[n("div",{ref:"content",staticClass:"d2-theme-header-menu__content",attrs:{"flex-box":"1",flex:""}},[n("div",{ref:"scroll",staticClass:"d2-theme-header-menu__scroll",style:"transform: translateX("+e.currentTranslateX+"px);",attrs:{"flex-box":"0"}},[n("Menu",{attrs:{mode:"horizontal","default-active":e.active},on:{select:e.handleHeaderMenuSelect}},[e._l(e.header,function(e,t){return[void 0===e.children?n("MenuItem",{key:t,attrs:{menu:e}}):n("HeaderMenuSub",{key:t,attrs:{menu:e}})]})],2)],1)]),e.isScroll?n("div",{staticClass:"d2-theme-header-menu__prev",attrs:{"flex-box":"0",flex:"main:center cross:center"},on:{click:function(t){e.scroll("left")}}},[n("i",{staticClass:"el-icon-arrow-left"})]):e._e(),e.isScroll?n("div",{staticClass:"d2-theme-header-menu__next",attrs:{"flex-box":"0",flex:"cross:center"},on:{click:function(t){e.scroll("right")}}},[n("i",{staticClass:"el-icon-arrow-right"})]):e._e()])},[],!1,null,null,null);_.options.__file="index.vue";t.default=_.exports}}]);