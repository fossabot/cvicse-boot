(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-42c18a4e"],{"42f4":function(t,e,o){"use strict";o.r(e);var r=o("be94"),l=o("2f62"),n=(o("ac6a"),o("2ef0")),a={props:{type:{default:"log"},title:{default:""},value:{default:""}},computed:{className:function(){return"log"===this.type?"d2-error-log-list__expand--log":"d2-error-log-list__expand--error"}}},i=o("2877"),s=Object(i.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"d2-error-log-list__expand",class:t.className},[o("p",{staticClass:"d2-error-log-list__expand-title"},[t._v(t._s(t.title))]),o("p",{staticClass:"d2-error-log-list__expand-value"},[t._v(t._s(""===t.value?"无数据":t.value))]),t._t("default")],2)},[],!1,null,null,null);s.options.__file="index.vue";var u={name:"d2-error-log-list",components:{ExpandItem:s.exports},computed:Object(r.a)({},Object(l.e)("d2admin",{logList:function(t){return t.log.list}}),{logReverse:function(){var o=this,r=[],l=this.logList.length;return this.logList.forEach(function(t,e){r.push(o.logList[l-1-e])}),r}}),methods:{get:n.get,filterType:function(t,e){return e.type===t},stackBeautify:function(t){return t?t.stack:""}}},c=(o("e032"),Object(i.a)(u,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logReverse,border:"",stripe:"",size:"mini"}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{staticClass:"d2-error-log-list__expand-group"},[o("expand-item",{attrs:{type:t.row.type,title:"类型",value:"log"===t.row.type?"日志":"异常"}}),o("expand-item",{attrs:{type:t.row.type,title:"内容",value:t.row.info}}),"error"===t.row.type?o("expand-item",{attrs:{type:"error",title:"报错组件",value:e.get(t.row.vm,"$vnode.tag","")}}):e._e(),"error"===t.row.type?o("expand-item",{attrs:{type:"error",title:"错误名称",value:e.get(t.row.err,"name","")}}):e._e(),"error"===t.row.type?o("expand-item",{attrs:{type:"error",title:"错误信息",value:e.get(t.row.err,"message","")}}):e._e(),"error"===t.row.type?o("expand-item",{attrs:{type:"error",title:"错误堆栈",value:"见下"}},[o("div",{staticStyle:{overflow:"auto"}},[o("pre",[e._v(e._s(e.stackBeautify(t.row.err)))])])]):e._e(),o("expand-item",{attrs:{type:t.row.type,title:"用户名",value:e.get(t.row.user,"name","")}}),o("expand-item",{attrs:{type:t.row.type,title:"uuid",value:t.row.uuid}}),o("expand-item",{attrs:{type:t.row.type,title:"token",value:t.row.token}}),o("expand-item",{attrs:{type:t.row.type,title:"页面地址",value:t.row.url}}),o("expand-item",{attrs:{type:t.row.type,title:"时间",value:t.row.time}})],1)}}])}),o("el-table-column",{attrs:{prop:"type",label:"类型",width:"80px",align:"center",filters:[{text:"日志",value:"log"},{text:"异常",value:"error"}],"filter-multiple":!1,"filter-method":e.filterType,"filter-placement":"bottom"},scopedSlots:e._u([{key:"default",fn:function(t){return["error"===t.row.type?o("el-tag",{attrs:{size:"mini",type:"danger"}},[o("d2-icon",{attrs:{name:"bug"}}),e._v(" Bug\n      ")],1):o("el-tag",{attrs:{size:"mini",type:"info"}},[o("d2-icon",{attrs:{name:"dot-circle-o"}}),e._v(" Log\n      ")],1)]}}])}),o("el-table-column",{attrs:{label:"地址",prop:"url",width:"140px","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{label:"内容",prop:"info","show-overflow-tooltip":!0}}),o("el-table-column",{attrs:{label:"错误类型",width:"140px","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(e.get(t.row.err,"name",""))+"\n    ")]}}])}),o("el-table-column",{attrs:{label:"错误信息",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(e.get(t.row.err,"message",""))+"\n    ")]}}])})],1)},[],!1,null,null,null));c.options.__file="index.vue";var p={components:{D2ErrorLogList:c.exports},data:function(){return{dialogVisible:!1}},computed:Object(r.a)({},Object(l.c)("d2admin",{logLength:"log/length",logLengthError:"log/lengthError"}),{tooltipContent:function(){return 0===this.logLength?"没有日志或异常":"".concat(this.logLength," 条日志").concat(0<this.logLengthError?" | 包含 ".concat(this.logLengthError," 个异常"):"")}}),methods:Object(r.a)({},Object(l.d)("d2admin/log",["clean"]),{handleClick:function(){0<this.logLength&&(this.dialogVisible=!0)},handleLogClean:function(){this.dialogVisible=!1,this.clean()}})},d=Object(i.a)(p,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-tooltip",{attrs:{effect:"dark",content:e.tooltipContent,placement:"bottom"}},[o("el-button",{staticClass:"d2-ml-0 d2-mr btn-text can-hover",attrs:{type:"text"},on:{click:e.handleClick}},[0<e.logLength?o("el-badge",{attrs:{max:99,value:e.logLengthError,"is-dot":0===e.logLengthError}},[o("d2-icon",{staticStyle:{"font-size":"20px"},attrs:{name:0===e.logLengthError?"dot-circle-o":"bug"}})],1):o("d2-icon",{staticStyle:{"font-size":"20px"},attrs:{name:"dot-circle-o"}})],1)],1),o("el-dialog",{attrs:{title:e.tooltipContent,fullscreen:!0,visible:e.dialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"d2-mb-10"},[o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.handleLogClean}},[o("d2-icon",{attrs:{name:"trash-o"}}),e._v("\n        清空\n      ")],1)],1),o("d2-error-log-list")],1)],1)},[],!1,null,null,null);d.options.__file="index.vue";e.default=d.exports},9983:function(t,e,o){},e032:function(t,e,o){"use strict";var r=o("9983");o.n(r).a}}]);